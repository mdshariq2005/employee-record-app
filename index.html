<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Employee Management System</title>
    <!-- Tailwind CSS CDN for modern styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom CSS to hide content until a tab is active */
        .tab-content-item {
            display: none;
        }
        .tab-content-item.active {
            display: block;
        }

        /* Modal open/close animations */
        .modal-container {
            transition: opacity 0.3s ease;
        }
        .modal-container.hidden {
            opacity: 0;
            pointer-events: none;
        }
        .modal-content-wrapper {
            transition: transform 0.3s ease;
        }
        .modal-container.hidden .modal-content-wrapper {
            transform: scale(0.95);
        }

        /* Responsive max-height for modal body */
        .modal-body {
            max-height: calc(100vh - 250px); /* Adjust height for header and footer */
            overflow-y: auto;
        }
        @media (min-width: 640px) {
            .modal-body {
                max-height: calc(100vh - 300px); /* Adjust for larger screens */
            }
        }
    </style>
</head>
<body class="bg-gray-100 font-sans p-4 sm:p-8">
    

    <!-- Main Application Container -->
    <div class="max-w-6xl mx-auto">
        <h2 class="text-3xl sm:text-4xl font-bold text-gray-800 mb-6 text-center">Employee Management System</h2>
<br>
        <!-- Employee Counts and Action Buttons -->
        <div class="flex flex-col sm:flex-row justify-between items-center mb-6 space-y-4 sm:space-y-0">
            <!-- Employee Counts Section -->
            <div class="grid grid-cols-3 gap-4 w-full sm:w-auto">
                <div class="bg-white p-4 rounded-xl shadow-md text-center">
                    <p class="text-sm text-gray-500">Total</p>
                    <p id="total-employees" class="text-2xl font-bold text-gray-800 mt-1">0</p>
                </div>
                <div class="bg-white p-4 rounded-xl shadow-md text-center">
                    <p class="text-sm text-gray-500">Active</p>
                    <p id="active-employees" class="text-2xl font-bold text-green-600 mt-1">0</p>
                </div>
                <div class="bg-white p-4 rounded-xl shadow-md text-center">
                    <p class="text-sm text-gray-500">Terminated</p>
                    <p id="terminated-employees" class="text-2xl font-bold text-red-600 mt-1">0</p>
                </div>
            </div>

            <!-- Action Button -->
            <button id="open-add-modal-btn" class="px-6 py-3 bg-blue-600 text-white font-medium rounded-full shadow-lg hover:bg-blue-700 transition-colors flex items-center space-x-2 w-full sm:w-auto justify-center">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                <span>Add New Employee</span>
            </button>
        </div>

        <!-- Employee Cards Section -->
        <div id="employee-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <!-- Employee cards will be dynamically inserted here -->
        </div>

        <!-- Employee Details Modal Section -->
        <div id="details-modal" class="modal-container hidden fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center p-4 z-50">
            <div class="modal-content-wrapper w-full max-w-4xl bg-white rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]">
                
                <!-- Modal Header -->
                <div class="bg-gray-800 text-white p-6 sm:p-10 text-center rounded-t-2xl relative flex-shrink-0">
                    <!-- Close button to return to the list view -->
                    <button id="close-details-modal-btn" class="absolute top-4 right-4 p-2 rounded-full bg-gray-700 hover:bg-gray-600 transition-colors" aria-label="Close modal">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-6 w-6 text-white"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                    </button>
                    <!-- Employee profile picture or initials -->
                    <div id="profile-picture" class="w-24 h-24 sm:w-32 sm:h-32 rounded-full mx-auto mb-4 border-4 border-white shadow-lg overflow-hidden flex items-center justify-center bg-gray-700 text-4xl font-bold">
                        <!-- Image or initials will be dynamically inserted here -->
                    </div>
                    <h1 id="employee-name" class="text-3xl sm:text-4xl font-bold tracking-tight"></h1>
                    <p id="employee-title" class="text-lg sm:text-xl font-light text-gray-300 mt-1"></p>
                    <div id="employee-status" class="mt-2 text-sm font-medium"></div>
                </div>
            
                <!-- Tab Navigation Section -->
                <div class="p-4 sm:p-6 border-b border-gray-200 flex-shrink-0">
                    <div class="flex justify-center sm:justify-start space-x-2 sm:space-x-4">
                        <button class="tab-btn px-4 py-2 rounded-lg font-medium transition-colors bg-blue-500 text-white shadow-md" data-tab="personal">Personal Details</button>
                        <button class="tab-btn px-4 py-2 rounded-lg font-medium transition-colors bg-gray-200 text-gray-700 hover:bg-gray-300" data-tab="job">Job Information</button>
                        <button class="tab-btn px-4 py-2 rounded-lg font-medium transition-colors bg-gray-200 text-gray-700 hover:bg-gray-300" data-tab="team">Team</button>
                    </div>
                </div>
                
                <!-- Tab Content Section - Scrollable -->
                <div class="modal-body p-4 sm:p-8">
                    <div id="personal-content" class="tab-content-item active">
                        <h3 class="text-xl font-semibold text-gray-800 mb-4">Personal Details</h3>
                        <div id="personal-details-cards" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <!-- Personal info cards will be inserted here -->
                        </div>
                    </div>
                    <div id="job-content" class="tab-content-item">
                        <h3 class="text-xl font-semibold text-gray-800 mb-4">Job Information</h3>
                        <div id="job-details-cards" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <!-- Job info cards will be inserted here -->
                        </div>
                        <div id="termination-info" class="mt-8 hidden">
                            <h4 class="text-lg font-bold text-red-600 mb-2">Termination Details</h4>
                            <div id="termination-info-cards" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <!-- Termination cards will be dynamically inserted here -->
                            </div>
                        </div>
                        <div id="rehire-info" class="mt-8 hidden">
                            <h4 class="text-lg font-bold text-gray-800 mb-2">Employment History</h4>
                            <div id="rehire-info-cards" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <!-- Rehire cards will be dynamically inserted here -->
                            </div>
                        </div>
                    </div>
                    <div id="team-content" class="tab-content-item">
                        <h3 class="text-xl font-semibold text-gray-800 mb-4">Team Members</h3>
                        <ul id="team-list" class="divide-y divide-gray-200">
                            <!-- Team members will be inserted here -->
                        </ul>
                    </div>
                </div>

                <!-- Action buttons for terminate/rehire -->
                <div class="p-4 sm:p-6 bg-gray-50 flex flex-col sm:flex-row justify-start sm:justify-end space-y-2 sm:space-y-0 sm:space-x-4 flex-shrink-0">
                <button id="edit-btn" class="px-6 py-3 bg-gray-600 text-white font-medium rounded-full shadow-lg hover:bg-gray-700 transition-colors hidden">Edit Details</button>
                <button id="terminate-btn" class="px-6 py-3 bg-red-600 text-white font-medium rounded-full shadow-lg hover:bg-red-700 transition-colors hidden">Terminate</button>
                <button id="rehire-btn" class="px-6 py-3 bg-green-600 text-white font-medium rounded-full shadow-lg hover:bg-green-700 transition-colors hidden">Rehire</button>
                <button id="reassign-btn" class="px-6 py-3 bg-blue-600 text-white font-medium rounded-full shadow-lg hover:bg-blue-700 transition-colors">Reassign Manager</button>
</div>
            </div>
        </div>

        <!-- Add Employee Modal Section -->
        <div id="add-modal" class="modal-container hidden fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center p-4 z-50">
            <div class="modal-content-wrapper w-full max-w-lg bg-white rounded-2xl shadow-2xl flex flex-col max-h-[90vh]">
                <div class="bg-gray-800 text-white p-6 sm:p-8 rounded-t-2xl relative flex-shrink-0">
                    <button id="close-add-modal-btn" class="absolute top-4 right-4 p-2 rounded-full bg-gray-700 hover:bg-gray-600 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-6 w-6 text-white"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                    </button>
                    <h2 class="text-2xl font-bold text-center">Add New Employee</h2>
                </div>
                <form id="add-employee-form" class="flex flex-col h-full overflow-y-auto max-h-full">
    <div class="p-6 sm:p-8 space-y-4">
        <div>
            <label for="add-image" class="block text-sm font-medium text-gray-700">Profile Picture</label>
            <input type="file" id="add-image" name="image" accept="image/*" class="mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100">
            <div id="add-image-preview" class="mt-4 flex items-center justify-center w-24 h-24 rounded-full overflow-hidden bg-gray-100 border border-gray-300">
                <span class="text-gray-400 text-sm">Preview</span>
            </div>
        </div>

        <div>
            <label for="add-name" class="block text-sm font-medium text-gray-700">Full Name</label>
            <input type="text" id="add-name" name="name" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50">
        </div>
        <div>
            <label for="add-title" class="block text-sm font-medium text-gray-700">Job Title</label>
            <input type="text" id="add-title" name="title" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50">
        </div>
        <div>
            <label for="add-department" class="block text-sm font-medium text-gray-700">Department</label>
            <input type="text" id="add-department" name="department" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50">
        </div>
        <div>
            <label for="add-manager" class="block text-sm font-medium text-gray-700">Manager</label>
            <input type="text" id="add-manager" name="manager" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50">
        </div>
        <div>
            <label for="add-email" class="block text-sm font-medium text-gray-700">Email</label>
            <input type="email" id="add-email" name="email" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50">
        </div>
        <div>
            <label for="add-phone" class="block text-sm font-medium text-gray-700">Phone</label>
            <input type="tel" id="add-phone" name="phone" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50">
        </div>
        <div>
            <label for="add-address" class="block text-sm font-medium text-gray-700">Address</label>
            <input type="text" id="add-address" name="address" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50">
        </div>
        <div>
                            <label for="new-start-date" class="block text-sm font-medium text-gray-700">Start Date</label>
                            <input type="date" id="new-start-date" name="startDate" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50">
                        </div>
    </div>
    <div class="flex justify-end pt-4 pb-6 px-8 flex-shrink-0">
        <button type="submit" class="px-6 py-3 bg-blue-600 text-white font-bold rounded-full shadow-lg hover:bg-blue-700 transition-colors">
            Add Employee
        </button>
    </div>
</form>
            </div>
        </div>
        
        <!-- Termination Modal -->
        <div id="termination-modal" class="modal-container hidden fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center p-4 z-50">
            <div class="modal-content-wrapper w-full max-w-sm bg-white rounded-2xl shadow-2xl overflow-hidden">
                <div class="bg-red-600 text-white p-6 sm:p-8 rounded-t-2xl relative flex-shrink-0">
                    <button id="close-termination-modal-btn" class="absolute top-4 right-4 p-2 rounded-full bg-red-500 hover:bg-red-400 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-6 w-6 text-white"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                    </button>
                    <h2 class="text-2xl font-bold text-center">Terminate Employee</h2>
                </div>
                <form id="terminate-form">
                    <div class="p-6 sm:p-8 space-y-4">
                        <div>
                            <label for="termination-date" class="block text-sm font-medium text-gray-700">Termination Date</label>
                            <input type="date" id="termination-date" name="terminationDate" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 focus:border-red-500 focus:ring focus:ring-red-500 focus:ring-opacity-50">
                        </div>
                        <div>
                            <label for="termination-reason" class="block text-sm font-medium text-gray-700">Reason for Termination</label>
                            <textarea id="termination-reason" name="terminationReason" rows="4" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 focus:border-red-500 focus:ring focus:ring-red-500 focus:ring-opacity-50"></textarea>
                        </div>
                    </div>
                    <div class="flex justify-end pt-4 pb-6 px-8">
                        <button type="submit" class="px-6 py-3 bg-red-600 text-white font-bold rounded-full shadow-lg hover:bg-red-700 transition-colors">Confirm Termination</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Rehire Modal -->
        <div id="rehire-modal" class="modal-container hidden fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center p-4 z-50">
            <div class="modal-content-wrapper w-full max-w-sm bg-white rounded-2xl shadow-2xl overflow-hidden">
                <div class="bg-green-600 text-white p-6 sm:p-8 rounded-t-2xl relative flex-shrink-0">
                    <button id="close-rehire-modal-btn" class="absolute top-4 right-4 p-2 rounded-full bg-green-500 hover:bg-green-400 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-6 w-6 text-white"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                    </button>
                    <h2 class="text-2xl font-bold text-center">Rehire Employee</h2>
                </div>
                <form id="rehire-form">
                    <div class="p-6 sm:p-8 space-y-4">
                        <div>
                            <label for="rehire-date" class="block text-sm font-medium text-gray-700">Rehire Date</label>
                            <input type="date" id="rehire-date" name="rehireDate" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 focus:border-green-500 focus:ring focus:ring-green-500 focus:ring-opacity-50">
                        </div>
                    </div>
                    <div class="flex justify-end pt-4 pb-6 px-8">
                        <button type="submit" class="px-6 py-3 bg-green-600 text-white font-bold rounded-full shadow-lg hover:bg-green-700 transition-colors">Confirm Rehire</button>
                    </div>
                </form>
            </div>
        </div>
        
        <!-- Success Message Modal -->
        <div id="success-modal" class="modal-container hidden fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center p-4 z-50">
            <div class="modal-content-wrapper w-full max-w-sm bg-white rounded-2xl shadow-2xl p-8 text-center">
                <div class="flex justify-center mb-4">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 text-green-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-8.62"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>
                </div>
                <h3 id="success-message-header" class="text-xl font-bold text-gray-800 mb-2"></h3>
                <p id="success-message-text" class="text-gray-600"></p>
                <button id="close-success-modal-btn" class="mt-6 px-6 py-3 bg-blue-600 text-white font-bold rounded-full shadow-lg hover:bg-blue-700 transition-colors"> OK </button>
            </div>
        </div>
    </div>
    <footer class="text-center p-4 text-gray-500 text-sm">
    <a href="#" id="contact-link" class="hover:underline">About & Contact</a>
</footer>

<div id="contact-info" class="fixed inset-0 bg-gray-600 bg-opacity-50 hidden flex justify-center items-center">
    <div class="bg-white p-6 rounded-lg shadow-xl text-center">
        <h3 class="text-xl font-bold mb-4">About & Contact</h3>
        <p class="text-xs">This is a web-based Employee Management System application, designed to help you efficiently manage your company's employee data. Built with modern web technologies, it offers a clean, responsive interface for easy navigation on any device.</p>
        <hr class="my-6">
        <h3><strong>Core Features</strong></h3>
        <ul class="list-disc list-inside space-y-2 text-xs">
            <li><strong>Employee Records:</strong> Create, view, and manage comprehensive profiles for all employees.</li>
            <li><strong>Search and Filter:</strong> Quickly find specific employees by searching for their name, department, or job title.</li>
            <li><strong>Status Management:</strong> Easily update an employee's status, including options to **Terminate** or **Rehire**, which automatically update their record with relevant dates.</li>
            <li><strong>Profile Picture Management:</strong> Add or change employee profile pictures directly from the application. The system provides a **real-time image preview** during both new employee creation and record editing, ensuring the correct photo is selected before saving.</li>
            <li><strong>Employee Details Modal:</strong> A detailed view for each employee, showing all their key information, including contact details, job history, and an editable status.</li>
            <li><strong>Responsive Design:</strong> The application's interface is optimized for both desktop and mobile use, providing a seamless user experience.</li>
        </ul>
        <hr class="my-6">
        <p class="text-center font-medium text-xs">Created by: Shariq Mohd</p>
        <p class="text-center text-xs">Contact: <a href="mailto:shariq.mohd@gmail.com" class="text-blue-600 hover:underline">shariq.mohd@gmail.com</a></p>
        <button id="close-contact-info" class="mt-4 px-4 py-2 bg-blue-200 text-black-800 rounded-lg">Close</button>
    </div>
</div>
<div id="reassign-modal" class="modal-container hidden fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center p-4 z-50">
    <div class="modal-content-wrapper w-full max-w-sm bg-white rounded-2xl shadow-2xl overflow-hidden">
        <div class="bg-blue-600 text-white p-6 sm:p-8 rounded-t-2xl relative flex-shrink-0">
            <button id="close-reassign-modal-btn" class="absolute top-4 right-4 p-2 rounded-full bg-blue-500 hover:bg-blue-400 transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-6 w-6 text-white"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
            </button>
            <h2 class="text-2xl font-bold text-center">Reassign Manager</h2>
        </div>
        <form id="reassign-form">
            <div class="p-6 sm:p-8 space-y-4">
                <div>
                    <label for="new-manager-select" class="block text-sm font-medium text-gray-700">Select New Manager</label>
                    <select id="new-manager-select" name="newManager" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50"></select>
                </div>
            </div>
            <div class="flex justify-end pt-4 pb-6 px-8">
                <button type="submit" class="px-6 py-3 bg-blue-600 text-white font-bold rounded-full shadow-lg hover:bg-blue-700 transition-colors">Confirm Reassignment</button>
            </div>
        </form>
    </div>
</div>
<div id="edit-modal" class="modal-container hidden fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center p-4 z-50">
            <div class="modal-content-wrapper w-full max-w-lg bg-white rounded-2xl shadow-2xl flex flex-col max-h-[90vh]">
                <div class="bg-gray-800 text-white p-6 sm:p-8 rounded-t-2xl relative flex-shrink-0">
                    <button id="close-edit-modal-btn" class="absolute top-4 right-4 p-2 rounded-full bg-gray-700 hover:bg-gray-600 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-6 w-6 text-white"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                    </button>
                    <h2 class="text-2xl font-bold text-center">Edit Employee Details</h2>
                </div>
                <form id="edit-employee-form" class="flex flex-col h-full overflow-y-auto max-h-full">
                    <div class="p-6 sm:p-8 space-y-4">
                        <div>
                            <label for="edit-image" class="block text-sm font-medium text-gray-700">Profile Picture</label>
                            <input type="file" id="edit-image" name="image" accept="image/*" class="mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100">
                            <div id="edit-image-preview" class="mt-4 flex items-center justify-center w-24 h-24 rounded-full overflow-hidden bg-gray-100 border border-gray-300">
                                <span class="text-gray-400 text-sm">Preview</span>
                            </div>
                        </div>

                        <div>
                            <label for="edit-name" class="block text-sm font-medium text-gray-700">Full Name</label>
                            <input type="text" id="edit-name" name="name" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50">
                        </div>
                        <div>
                            <label for="edit-title" class="block text-sm font-medium text-gray-700">Job Title</label>
                            <input type="text" id="edit-title" name="title" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50">
                        </div>
                        <div>
                            <label for="edit-department" class="block text-sm font-medium text-gray-700">Department</label>
                            <input type="text" id="edit-department" name="department" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50">
                        </div>
                        <div>
                            <label for="edit-manager" class="block text-sm font-medium text-gray-700">Manager</label>
                            <input type="text" id="edit-manager" name="manager" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50">
                        </div>
                        <div>
                            <label for="edit-email" class="block text-sm font-medium text-gray-700">Email</label>
                            <input type="email" id="edit-email" name="email" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50">
                        </div>
                        <div>
                            <label for="edit-phone" class="block text-sm font-medium text-gray-700">Phone</label>
                            <input type="tel" id="edit-phone" name="phone" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50">
                        </div>
                        <div>
                            <label for="edit-address" class="block text-sm font-medium text-gray-700">Address</label>
                            <input type="text" id="edit-address" name="address" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50">
                        </div>
                    </div>
                    <div class="flex justify-end pt-4 pb-6 px-8 flex-shrink-0">
                        <button type="submit" class="px-6 py-3 bg-blue-600 text-white font-bold rounded-full shadow-lg hover:bg-blue-700 transition-colors">
                            Save Changes
                        </button>
                    </div>
                </form>
            </div>
        </div>
        
    <script>
        // Get the elements for the contact link and the info modal
const contactLink = document.getElementById('contact-link');
const contactInfo = document.getElementById('contact-info');
const closeContactInfoBtn = document.getElementById('close-contact-info');
const reassignBtn = document.getElementById('reassign-btn');
const reassignModal = document.getElementById('reassign-modal');
const closeReassignModalBtn = document.getElementById('close-reassign-modal-btn');
const reassignForm = document.getElementById('reassign-form');
const newManagerSelect = document.getElementById('new-manager-select');
const editBtn = document.getElementById('edit-btn');
        const editModal = document.getElementById('edit-modal');
        const closeEditModalBtn = document.getElementById('close-edit-modal-btn');
        const editEmployeeForm = document.getElementById('edit-employee-form');
        const editImagePreview = document.getElementById('edit-image-preview');

// Add an event listener to the "About & Contact" link to show the info
contactLink.addEventListener('click', (e) => {
    e.preventDefault();
    contactInfo.classList.remove('hidden');
});

// Function to save employees to local storage
function saveEmployeesToLocalStorage() {
    localStorage.setItem('employeesData', JSON.stringify(employees));
}

// Add an event listener to the "Close" button to hide the info
closeContactInfoBtn.addEventListener('click', () => {
    contactInfo.classList.add('hidden');
});
        // Mock data for multiple employees.
        // Updated to include 'status', 'terminationDate', 'terminationReason', and 'hireHistory'.
        // Load data from Local Storage or use mock data if none exists
        let employees = [];
        const savedData = localStorage.getItem('employeesData');
        if (savedData) {
            employees = JSON.parse(savedData);
        } else {
            // Use your mock data only if no saved data is found
            employees = [
                {
                    id: 'emp-001',
                    name: 'Jane Doe',
                    title: 'Lead Software Engineer',
                    department: 'Engineering',
                    manager: 'John Smith',
                    status: 'active',
                    hireHistory: [{ hireDate: '2020-03-15', terminationDate: null }],
                    email: 'jane.doe@example.com',
                    phone: '+1 (555) 123-4567',
                    address: '123 Tech Street, Silicon Valley, CA 94043',
                    image: 'https://placehold.co/100x100/A0A0A0/ffffff?text=JD',
                    team: []
                },
                // Add the rest of your mock employee data here
                // ...
            ];
        }

        let currentEmployee = null;

        // Utility function to format a date to 'YYYY-MM-DD'
        const formatDate = (dateString) => {
    // This will handle the date as YYYY-MM-DD to avoid timezone conversions
    const date = new Date(dateString + 'T00:00:00'); 
    const year = date.getFullYear();
    const month = String(date.getMonth() + 1).padStart(2, '0');
    const day = String(date.getDate()).padStart(2, '0');
    return `${year}-${month}-${day}`;
};

        // Utility function to generate a unique ID
        const generateId = () => {
            return 'emp-' + Math.random().toString(16).slice(2, 8);
        };

        // DOM Elements
        const employeeListEl = document.getElementById('employee-list');
        const openAddModalBtn = document.getElementById('open-add-modal-btn');
        const addModal = document.getElementById('add-modal');
        const closeAddModalBtn = document.getElementById('close-add-modal-btn');
        const addEmployeeForm = document.getElementById('add-employee-form');
        const detailsModal = document.getElementById('details-modal');
        const closeDetailsModalBtn = document.getElementById('close-details-modal-btn');
        const terminateBtn = document.getElementById('terminate-btn');
        const rehireBtn = document.getElementById('rehire-btn');
        const terminationModal = document.getElementById('termination-modal');
        const closeTerminationModalBtn = document.getElementById('close-termination-modal-btn');
        const terminateForm = document.getElementById('terminate-form');
        const rehireModal = document.getElementById('rehire-modal');
        const closeRehireModalBtn = document.getElementById('close-rehire-modal-btn');
        const rehireForm = document.getElementById('rehire-form');
        const successModal = document.getElementById('success-modal');
        const closeSuccessModalBtn = document.getElementById('close-success-modal-btn');
        const successMessageHeaderEl = document.getElementById('success-message-header');
        const successMessageTextEl = document.getElementById('success-message-text');
        const totalEmployeesEl = document.getElementById('total-employees');
        const activeEmployeesEl = document.getElementById('active-employees');
        const terminatedEmployeesEl = document.getElementById('terminated-employees');

        // Function to render the list of employees
        function renderEmployeeList() {
            employeeListEl.innerHTML = '';
            let activeCount = 0;
            let terminatedCount = 0;

            employees.forEach(employee => {
                const isTerminated = employee.status === 'terminated';
                if (isTerminated) {
                    terminatedCount++;
                } else {
                    activeCount++;
                }

                const cardHtml = `
                    <div class="bg-white p-6 rounded-2xl shadow-lg hover:shadow-xl transition-shadow cursor-pointer flex items-center space-x-4" data-id="${employee.id}">
                        <div class="w-16 h-16 rounded-full overflow-hidden flex-shrink-0 bg-gray-200 flex items-center justify-center text-sm font-bold text-gray-700">
                            ${employee.image ? `<img src="${employee.image}" alt="${employee.name}" class="w-full h-full object-cover">` : employee.name.charAt(0)}
                        </div>
                        <div class="flex-grow">
                            <h3 class="font-bold text-gray-800 text-lg">${employee.name}</h3>
                            <p class="text-sm text-gray-500">${employee.title}</p>
                            <div class="mt-1 flex items-center">
                                <span class="w-2 h-2 rounded-full ${isTerminated ? 'bg-red-500' : 'bg-green-500'} mr-2"></span>
                                <span class="text-xs text-gray-600 font-medium">${isTerminated ? 'Terminated' : 'Active'}</span>
                            </div>
                        </div>
                    </div>
                `;
                employeeListEl.insertAdjacentHTML('beforeend', cardHtml);
            });

            totalEmployeesEl.textContent = employees.length;
            activeEmployeesEl.textContent = activeCount;
            terminatedEmployeesEl.textContent = terminatedCount;
        }

        // Function to show a modal
        const showModal = (modalEl) => {
            modalEl.classList.remove('hidden');
            setTimeout(() => {
                modalEl.style.opacity = 1;
                modalEl.querySelector('.modal-content-wrapper').style.transform = 'scale(1)';
            }, 10);
        };
        
        // Function to hide a modal
        const hideModal = (modalEl) => {
            modalEl.style.opacity = 0;
            modalEl.querySelector('.modal-content-wrapper').style.transform = 'scale(0.95)';
            setTimeout(() => {
                modalEl.classList.add('hidden');
            }, 300);
        };

        // Function to show the success message modal
        function showSuccessModal(header, text) {
            successMessageHeaderEl.textContent = header;
            successMessageTextEl.textContent = text;
            showModal(successModal);
        }

        // Function to close the success message modal
        function hideSuccessModal() {
            hideModal(successModal);
        }

        // Function to render the details modal with employee data
        function renderDetailsModal(employee) {
            currentEmployee = employee;

            document.getElementById('employee-name').textContent = employee.name;
            document.getElementById('employee-title').textContent = employee.title;

            // Profile Picture
            const profilePictureEl = document.getElementById('profile-picture');
            profilePictureEl.innerHTML = employee.image ? `<img src="${employee.image}" alt="${employee.name}" class="w-full h-full object-cover">` : `<span class="text-white">${employee.name.charAt(0)}</span>`;

            // Status Indicator
            const statusEl = document.getElementById('employee-status');
            const isTerminated = employee.status === 'terminated';
            statusEl.innerHTML = `
                <div class="flex items-center justify-center">
                    <span class="w-2 h-2 rounded-full ${isTerminated ? 'bg-red-500' : 'bg-green-500'} mr-2"></span>
                    <span class="text-sm font-medium ${isTerminated ? 'text-red-500' : 'text-green-500'}">${isTerminated ? 'Terminated' : 'Active'}</span>
                </div>
            `;
            
            // Show/hide action buttons
             if (isTerminated) {
                editBtn.classList.add('hidden'); // Hide the edit button
                terminateBtn.classList.add('hidden');
                rehireBtn.classList.remove('hidden');
                reassignBtn.classList.add('hidden');
            } else {
                editBtn.classList.remove('hidden'); // Show the edit button
                terminateBtn.classList.remove('hidden');
                rehireBtn.classList.add('hidden');
                reassignBtn.classList.remove('hidden');
            }

            

            // Render Personal Details Tab
            const personalDetailsHtml = `
                ${createDetailCard('Email', employee.email, `<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg>`)}
                ${createDetailCard('Phone', employee.phone, `<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2h-3.4A15.01 15.01 0 0 1 2 8.5V5.5A2.18 2.18 0 0 1 4.18 3h3.4a2 2 0 0 1 2 2.18c0 1-.2 2.5-1.5 4a15.01 15.01 0 0 0 5.4 5.4c1.5-1.3 3-1.5 4-1.5a2 2 0 0 1 2.18 2z"></path></svg>`)}
                ${createDetailCard('Address', employee.address, `<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></svg>`)}
            `;
            document.getElementById('personal-details-cards').innerHTML = personalDetailsHtml;

            // Render Job Information Tab
            const jobDetailsHtml = `
                ${createDetailCard('Department', employee.department, `<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="7" width="20" height="15" rx="2" ry="2"></rect><path d="M10 22V6m4 16V6M2 11h20M2 16h20M7 2v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V2"></path></svg>`)}
                ${createDetailCard('Job Title', employee.title, `<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="3" width="20" height="18" rx="2" ry="2"></rect><line x1="6" y1="7" x2="18" y2="7"></line><line x1="6" y1="11" x2="18" y2="11"></line><line x1="6" y1="15" x2="18" y2="15"></line></svg>`)}
                ${createDetailCard('Manager', employee.manager || 'N/A', `<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>`)}
                ${createDetailCard('Start Date', formatDate(employee.hireHistory[employee.hireHistory.length - 1].hireDate), `<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>`)}
               
            `;
            document.getElementById('job-details-cards').innerHTML = jobDetailsHtml;

            // Render Team Tab
            const teamListEl = document.getElementById('team-list');

// Only proceed if the employee has a manager assigned
if (employee.manager !== null) {
    // Find all employees who report to the same manager
    const teamMembers = employees.filter(emp => emp.manager === employee.manager && emp.id !== employee.id);
    let teamMembersHtml = '';

    if (teamMembers.length > 0) {
        teamMembersHtml = teamMembers.map(member => `
            <li class="py-3 flex items-center space-x-4">
                <div class="w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center font-semibold text-gray-700">
                    ${member.image ? `<img src="${member.image}" alt="${member.name}" class="w-full h-full object-cover rounded-full">` : member.name.charAt(0)}
                </div>
                <div>
                    <p class="font-medium text-gray-800">${member.name}</p>
                    <p class="text-sm text-gray-500">${member.title}</p>
                </div>
            </li>
        `).join('');
    } else {
        teamMembersHtml = `<p class="text-gray-500 text-center">No other team members found.</p>`;
    }
    teamListEl.innerHTML = teamMembersHtml;

} else {
    teamListEl.innerHTML = `<p class="text-gray-500 text-center">This employee does not have a manager.</p>`;
}

            // Show/hide termination and rehire info
            const terminationInfoEl = document.getElementById('termination-info');
            const rehireInfoEl = document.getElementById('rehire-info');

            if (isTerminated) {
                terminationInfoEl.classList.remove('hidden');
                rehireInfoEl.classList.add('hidden');
                const terminationInfoHtml = `
                    ${createDetailCard('Termination Date', formatDate(employee.terminationDate), `<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-red-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>`)}
                    ${createDetailCard('Reason', employee.terminationReason, `<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-red-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20z"></path><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>`)}
                `;
                document.getElementById('termination-info-cards').innerHTML = terminationInfoHtml;
            } else {
    terminationInfoEl.classList.add('hidden');

    // Render rehire history if available
    if (employee.hireHistory && employee.hireHistory.length > 1) {
        rehireInfoEl.classList.remove('hidden');
        let rehireHistoryHtml = '';

        // Add the Original Hire Date
        rehireHistoryHtml += createDetailCard('Original Hire Date', formatDate(employee.hireHistory[0].hireDate), `<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>`);

        // Add the Latest Hire Date
        rehireHistoryHtml += createDetailCard('Latest Hire Date', formatDate(employee.hireHistory[employee.hireHistory.length - 1].hireDate), `<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>`);

        document.getElementById('rehire-info-cards').innerHTML = rehireHistoryHtml;
    } else {
        rehireInfoEl.classList.add('hidden');
    }
}

            showModal(detailsModal);
        }

        // Helper function to create a detail card
        function createDetailCard(label, value, iconHtml) {
            return `
                <div class="bg-gray-50 p-4 rounded-lg flex items-center space-x-4">
                    <div class="flex-shrink-0 text-gray-500">
                        ${iconHtml}
                    </div>
                    <div>
                        <p class="text-sm font-medium text-gray-500">${label}</p>
                        <p class="text-gray-800 font-semibold">${value || 'N/A'}</p>
                    </div>
                </div>
            `;
        }
        
        // Event Listeners
// Reusable function to set up image preview
        function setupImagePreview(imageInputId, imagePreviewId) {
            const imageInput = document.getElementById(imageInputId);
            const imagePreview = document.getElementById(imagePreviewId);

            if (imageInput && imagePreview) {
                imageInput.addEventListener('change', (event) => {
                    const file = event.target.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            const img = document.createElement('img');
                            img.src = e.target.result;
                            img.alt = 'Selected Image Preview';
                            img.classList.add('w-full', 'h-full', 'object-cover', 'rounded-full');
                            imagePreview.innerHTML = ''; // Clear previous content
                            imagePreview.appendChild(img);
                        };
                        reader.readAsDataURL(file);
                    } else {
                        // If no file is selected, reset the preview
                        imagePreview.innerHTML = '<span class="text-gray-400 text-sm">Preview</span>';
                    }
                });
            }
        }

        // Call the function for both add and edit modals
        setupImagePreview('add-image', 'add-image-preview');
        setupImagePreview('edit-image', 'edit-image-preview');

// Open Edit Modal and Populate Form
        editBtn.addEventListener('click', () => {
            if (currentEmployee) {
                hideModal(detailsModal);
                populateEditForm(currentEmployee);
                showModal(editModal);
            }
        });

        // Close Edit Modal
        closeEditModalBtn.addEventListener('click', () => {
            hideModal(editModal);
        });

        // Function to populate the edit form with current employee data
        function populateEditForm(employee) {
            document.getElementById('edit-name').value = employee.name;
            document.getElementById('edit-title').value = employee.title;
            document.getElementById('edit-department').value = employee.department;
            document.getElementById('edit-manager').value = employee.manager;
            document.getElementById('edit-email').value = employee.email;
            document.getElementById('edit-phone').value = employee.phone;
            document.getElementById('edit-address').value = employee.address;

            // Update image preview
            editImagePreview.innerHTML = employee.image ? `<img src="${employee.image}" alt="${employee.name}" class="w-full h-full object-cover rounded-full">` : `<span class="text-gray-400 text-sm">Preview</span>`;
        }

        // Handle Edit Form Submission
        editEmployeeForm.addEventListener('submit', (e) => {
            e.preventDefault();

            // Find the employee in the main data array
            const employeeToEdit = employees.find(emp => emp.id === currentEmployee.id);
            if (employeeToEdit) {
                const formData = new FormData(editEmployeeForm);

                // Update employee details from form data
                employeeToEdit.name = formData.get('name');
                employeeToEdit.title = formData.get('title');
                employeeToEdit.department = formData.get('department');
                employeeToEdit.manager = formData.get('manager');
                employeeToEdit.email = formData.get('email');
                employeeToEdit.phone = formData.get('phone');
                employeeToEdit.address = formData.get('address');

                // Handle image upload if a new file is selected
                const imageFile = document.getElementById('edit-image').files[0];
                if (imageFile) {
                    const reader = new FileReader();
                    reader.onload = function(event) {
                        employeeToEdit.image = event.target.result;
                        saveEmployeesToLocalStorage();
                        renderEmployeeList();
                        hideModal(editModal);
                        showSuccessModal('Details Updated!', `${employeeToEdit.name}'s details have been successfully updated.`);
                    };
                    reader.readAsDataURL(imageFile);
                } else {
                    // If no new image, save other changes and re-render
                    saveEmployeesToLocalStorage();
                    renderEmployeeList();
                    hideModal(editModal);
                    showSuccessModal('Details Updated!', `${employeeToEdit.name}'s details have been successfully updated.`);
                }
            }
        });
        // Open Reassign Manager Modal
reassignBtn.addEventListener('click', () => {
    hideModal(detailsModal);
    populateManagerSelect();
    showModal(reassignModal);
});

// Close Reassign Manager Modal
closeReassignModalBtn.addEventListener('click', () => {
    hideModal(reassignModal);
});

// Handle Reassign Form Submission
reassignForm.addEventListener('submit', (e) => {
    e.preventDefault();
    if (!currentEmployee) return;

    const newManagerName = newManagerSelect.value;
    
    // Update the employee's manager
    currentEmployee.manager = newManagerName;

    // Re-render the UI
    renderEmployeeList();
    hideModal(reassignModal);
    showSuccessModal('Manager Reassigned!', `${currentEmployee.name}'s manager has been changed to ${newManagerName}.`);
});

// Function to populate the manager selection dropdown
function populateManagerSelect() {
    newManagerSelect.innerHTML = '';
    
    // Filter to get only active employees who are not the current employee
    const potentialManagers = employees.filter(emp => emp.id !== currentEmployee.id && emp.status !== 'terminated');
    
    potentialManagers.forEach(manager => {
        const option = document.createElement('option');
        option.value = manager.name;
        option.textContent = manager.name;
        newManagerSelect.appendChild(option);
    });
}
        
        // Open Add Employee Modal
        openAddModalBtn.addEventListener('click', () => {
            showModal(addModal);
        });

        // Close Add Employee Modal
        closeAddModalBtn.addEventListener('click', () => {
            hideModal(addModal);
        });
        
        // Close Details Modal
        closeDetailsModalBtn.addEventListener('click', () => {
            hideModal(detailsModal);
        });

        // Close Termination Modal
        closeTerminationModalBtn.addEventListener('click', () => {
            hideModal(terminationModal);
            showModal(detailsModal);
        });

        // Close Rehire Modal
        closeRehireModalBtn.addEventListener('click', () => {
            hideModal(rehireModal);
            showModal(detailsModal);
        });
        
        // Close Success Modal
        closeSuccessModalBtn.addEventListener('click', () => {
            hideSuccessModal();
        });

        // Open Termination Modal
        terminateBtn.addEventListener('click', () => {
           // hideModal(detailsModal);
            showModal(terminationModal);
            showModal(detailsModal);
        });

        // Open Rehire Modal
        rehireBtn.addEventListener('click', () => {
           // hideModal(detailsModal);
            showModal(rehireModal);
        });

        // Handle clicks on employee cards to show details modal
        employeeListEl.addEventListener('click', (e) => {
            const card = e.target.closest('[data-id]');
            if (card) {
                const id = card.dataset.id;
                const employee = employees.find(emp => emp.id === id);
                if (employee) {
                    renderDetailsModal(employee);
                }
            }
        });

        
       // Handle Add Employee Form Submission
        addEmployeeForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const formData = new FormData(addEmployeeForm);
            
            // Get the image file
            const imageFile = formData.get('image');
            
            // Check if a file was uploaded
            if (imageFile && imageFile.size > 0) {
                const reader = new FileReader();
                reader.onload = function(event) {
                    const newEmployee = {
                        id: generateId(),
                        name: formData.get('name'),
                        title: formData.get('title'),
                        department: formData.get('department'),
                        manager: formData.get('manager'),
                        email: formData.get('email'),
                        phone: formData.get('phone'),
                        address: formData.get('address'),
                        hireHistory: [{
                            hireDate: formData.get('startDate'),
                            terminationDate: null
                        }],
                        status: 'active',
                        image: event.target.result, // Set the image to the data URL
                        team: []
                    };
                    employees.push(newEmployee);
                    renderEmployeeList();
                    hideModal(addModal);
                    addEmployeeForm.reset();
                    showSuccessModal('Employee Added!', `A new employee, ${newEmployee.name}, has been added to the system.`);
                };
                reader.readAsDataURL(imageFile); // Read the file as a data URL
            } else {
                // Handle case where no image is uploaded
                const newEmployee = {
                    id: generateId(),
                    name: formData.get('name'),
                    title: formData.get('title'),
                    department: formData.get('department'),
                    manager: formData.get('manager'),
                    email: formData.get('email'),
                    phone: formData.get('phone'),
                    address: formData.get('address'),
                    hireHistory: [{
                        hireDate: formData.get('startDate'),
                        terminationDate: null
                    }],
                    status: 'active',
                    image: '', // Keep image as empty string if no file
                    team: []
                };
                employees.push(newEmployee);
                renderEmployeeList();
                saveEmployeesToLocalStorage(); // Add this line
                hideModal(addModal);
                addEmployeeForm.reset();
                showSuccessModal('Employee Added!', `A new employee, ${newEmployee.name}, has been added to the system.`);
            }
        });
        // Handle Terminate Employee Form Submission
        terminateForm.addEventListener('submit', (e) => {
            e.preventDefault();
            if (!currentEmployee) return;
            const terminationDate = document.getElementById('termination-date').value;
            const terminationReason = document.getElementById('termination-reason').value;

            // Update the employee's status and termination details
            currentEmployee.status = 'terminated';
            currentEmployee.terminationDate = terminationDate;
            currentEmployee.terminationReason = terminationReason;
            
            // Find the last active hire history entry and update its termination date
            const lastHire = currentEmployee.hireHistory.find(h => h.terminationDate === null);
            if (lastHire) {
                lastHire.terminationDate = terminationDate;
            }

            renderEmployeeList();
            saveEmployeesToLocalStorage(); 
            hideModal(terminationModal);

            // Add this line to refresh the details modal with the new data
            renderDetailsModal(currentEmployee); 
            
            showSuccessModal('Employee Terminated!', `${currentEmployee.name} has been successfully terminated.`);
        });

        // Handle Rehire Employee Form Submission
        rehireForm.addEventListener('submit', (e) => {
            e.preventDefault();
            if (!currentEmployee) return;
            const rehireDate = document.getElementById('rehire-date').value;
            
            // Find the employee in the main data array
            const employeeToRehire = employees.find(emp => emp.id === currentEmployee.id);
            if (employeeToRehire) {
                // Update the employee's status to active
                employeeToRehire.status = 'active';
                
                // Add a new entry to the hire history
                employeeToRehire.hireHistory.push({
                    hireDate: rehireDate,
                    terminationDate: null
                });
                
                // Clear termination details
                employeeToRehire.terminationReason = null;
                employeeToRehire.terminationDate = null;
            }

            // Re-render the employee list
            renderEmployeeList();
            saveEmployeesToLocalStorage(); 
            // Hide the rehire modal and show the success message
            hideModal(rehireModal);

            // Add this line to refresh the details modal with the new data
            renderDetailsModal(currentEmployee); 

            showSuccessModal('Employee Rehired!', 'The employee has been successfully rehired.');
        });
        
        // --- START OF NEW CODE: TAB FUNCTIONALITY ---
        const tabButtons = document.querySelectorAll('.tab-btn');
        const tabContents = document.querySelectorAll('.tab-content-item');

        tabButtons.forEach(button => {
            button.addEventListener('click', () => {
                // Remove active classes from all buttons and content
                tabButtons.forEach(btn => {
                    btn.classList.remove('bg-blue-500', 'text-white', 'shadow-md');
                    btn.classList.add('bg-gray-200', 'text-gray-700', 'hover:bg-gray-300');
                });
                tabContents.forEach(content => {
                    content.classList.remove('active');
                });

                // Add active classes to the clicked button and its corresponding content
                const tabId = button.dataset.tab;
                document.getElementById(`${tabId}-content`).classList.add('active');
                button.classList.add('bg-blue-500', 'text-white', 'shadow-md');
                button.classList.remove('bg-gray-200', 'text-gray-700', 'hover:bg-gray-300');
            });
        });
        // --- END OF NEW CODE: TAB FUNCTIONALITY ---


        // Initial render on page load
        document.addEventListener('DOMContentLoaded', renderEmployeeList);
    </script>
</body>
</html>
